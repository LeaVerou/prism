var horSpace=/[\t ]{1}/,expressionDef=function(e){return void 0===e&&(e=!0),e?/\{[^\r\n\[\]{]*\}(?=[^\r\n\[\]\}]*)/m:/\{[^\r\n\[\]{}]*\}/};Prism.languages.naniscript={comment:{pattern:/^([\t ]*);[^\r\n]*$/m,lookbehind:!0},define:{pattern:/^>.+$/m,alias:"tag",inside:{value:{pattern:/(^>[a-zA-Z0-9_]+)[\t ]{1}[^{}\r\n]+/,alias:"operator",lookbehind:!0,inside:{_hor_space:/^[\t ]{1}/,_template:/.*/}},key:{pattern:/(^>)[a-zA-Z0-9_]+/,lookbehind:!0}}},label:{pattern:/^[\t ]*[#]{1}[\t ]*[a-zA-Z0-9]+[\t ]?$/m,lookbehind:!0,alias:"regex",inside:{_hor_space:horSpace,value:/[^# ]+/}},"generic-text":{pattern:/^[^#@>;\s]{1}.*$/m,alias:"punctuation",inside:{"escaped-char":{pattern:/\\[{}\[\]"]{1}/m},expression:{pattern:expressionDef(),greedy:!0,alias:"selector"},"inline-command":{pattern:/\[[\t ]*[a-zA-Z0-9_]+[^\r\n\[]*\]/m,greedy:!0,alias:"function",inside:{"quoted-string":{pattern:/"(?:[^"\\]|\\.)*"/},"command-param-id":{alias:"property",pattern:/([^"\\]?)[a-zA-Z0-9_]+:/,lookbehind:!0},"command-param-name":{pattern:/^(\[)[\t ]*[a-zA-Z0-9_]+/,alias:"name",lookbehind:!0},"start-stop-char":/[\[\]]{1}/,"command-param-value":[{pattern:expressionDef(!1),alias:"selector"},{pattern:/([\t ]+).+?(?=[\t ]|$)/,alias:"operator",greedy:!0,lookbehind:!0},{pattern:/.*/,alias:"operator"}]}}}},command:{pattern:/^([\t ]*)@[a-zA-Z0-9_]+(?=[\t ]+[\S]{1,}|[\t ]+['"][\S]|[\t ]+$|$).*/m,lookbehind:!0,alias:"function",inside:{expression:{pattern:expressionDef(),greedy:!0,alias:"selector"},whitespaces:/[\t ]+$/,"command-name":/^[\t ]*@[a-zA-Z0-9_]+/,"command-params":{pattern:/[^\n]+$/,inside:{"quoted-string":{pattern:/"(?:[^"\\]|\\.)*"/,alias:"operator"},"command-param-id":{alias:"property",pattern:/([^"\\]?) [a-zA-Z0-9_]+:/,lookbehind:!0},"command-param-value":[{pattern:expressionDef(!1),alias:"selector"},{pattern:/([\t ]+).+?(?=[\t ]|$)/,alias:"operator",greedy:!0,lookbehind:!0},{pattern:/.*/,alias:"operator"}],_hor_space:horSpace}}}}},Prism.languages.nani=Prism.languages.naniscript,Prism.hooks.add("after-tokenize",function(n){n.tokens.map(function(e,a){if("generic-text"===e.type){var t=getContents(e,[]).join("");isBracketsBalanced(t)||(e.type="bad-line",e.content=t,n.tokens[a]=e)}return!1})});var isBracketsBalanced=function(e){for(var a=[],t=0,n=e;t<n.length;t++){var r=n[t],o="[]{}".indexOf(r);if(-1!==o)if(o%2==0)a.push(o+1);else if(a.pop()!==o)return!1}return 0===a.length};function getContents(e,a){return a=a||[],"string"==typeof e?a.push(e):"string"==typeof e.content?a.push(e.content):Array.isArray(e.content)&&e.content.forEach(function(e){getContents(e,a)}),a}