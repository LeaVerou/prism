!function(a){function t(a){return a?/\{[^\r\n\[\]{]*\}(?=[^\r\n\[\]\}]*)/m:/\{[^\r\n\[\]{}]*\}/}function e(a){return"string"==typeof a?a:Array.isArray(a)?a.map(e).join(""):e(a.content)}a.languages.naniscript={comment:{pattern:/^([\t ]*);.*/m,lookbehind:!0},define:{pattern:/^>.+/m,alias:"tag",inside:{value:{pattern:/(^>\w+[\t ]+)[^{}\r\n]+/,lookbehind:!0,alias:"operator"},key:{pattern:/(^>)\w+/,lookbehind:!0}}},label:{pattern:/^([\t ]*)#[\t ]*\w+[\t ]?$/m,lookbehind:!0,alias:"regex"},command:{pattern:/^([\t ]*)@\w+(?=[\t ]|$).*/m,lookbehind:!0,alias:"function",inside:{expression:{pattern:t(!0),greedy:!0,alias:"selector"},whitespaces:/[\t ]+$/,"command-name":/^[\t ]*@\w+/,"command-params":{pattern:/[\s\S]+/,inside:{"quoted-string":{pattern:/"(?:[^"\\]|\\.)*"/,alias:"operator"},"command-param-id":{pattern:/([^"\\]?) \w+:/,lookbehind:!0,alias:"property"},"command-param-value":[{pattern:t(!1),alias:"selector"},{pattern:/([\t ]+).+?(?=[\t ]|$)/,lookbehind:!0,greedy:!0,alias:"operator"},{pattern:/.+/,alias:"operator"}]}}}},"generic-text":{pattern:/^[^#@>;\r\n].*/m,alias:"punctuation",inside:{"escaped-char":/\\[{}\[\]"]/m,expression:{pattern:t(!0),greedy:!0,alias:"selector"},"inline-command":{pattern:/\[[\t ]*\w+[^\r\n\[]*\]/m,greedy:!0,alias:"function",inside:{"quoted-string":/"(?:[^"\\]|\\.)*"/,"command-param-id":{pattern:/([^"\\]?)\w+:/,lookbehind:!0,alias:"property"},"command-param-name":{pattern:/^(\[[\t ]*)\w+/,lookbehind:!0,alias:"name"},"start-stop-char":/[\[\]]/,"command-param-value":[{pattern:t(!1),alias:"selector"},{pattern:/([\t ]+).+?(?=[\t ]|$)/,lookbehind:!0,alias:"operator"},{pattern:/.+/,alias:"operator"}]}}}}},a.languages.nani=a.languages.naniscript,a.hooks.add("after-tokenize",function(a){a.tokens.forEach(function(a){if("string"!=typeof a&&"generic-text"===a.type){var t=e(a);(function(a){for(var t=[],e=0;e<a.length;e++){var n=a[e],r="[]{}".indexOf(n);if(-1!==r)if(r%2==0)t.push(r+1);else if(t.pop()!==r)return!1}return 0===t.length})(t)||(a.type="bad-line",a.content=t)}})})}(Prism);