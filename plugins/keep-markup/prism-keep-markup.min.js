"undefined"!=typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add("before-highlight",function(r){if(r.element.children.length&&Prism.util.isActive(r.element,"keep-markup",!0)){var o=0,u=[],a=function(r,e){var f={};e||(f.clone=r.cloneNode(!1),f.posOpen=o,u.push(f));for(var i=0,n=r.childNodes.length;i<n;i++){var t=r.childNodes[i];1===t.nodeType?a(t):3===t.nodeType&&(o+=t.data.length)}e||(f.posClose=o)};a(r.element,!0),u&&u.length&&(r.keepMarkup=u)}}),Prism.hooks.add("after-highlight",function(e){if(e.keepMarkup&&e.keepMarkup.length){var o=function(r,e){for(var f=0,i=r.childNodes.length;f<i;f++){var n=r.childNodes[f];if(1===n.nodeType){if(!o(n,e))return!1}else 3===n.nodeType&&(!e.nodeStart&&e.pos+n.data.length>e.node.posOpen&&(e.nodeStart=n,e.nodeStartPos=e.node.posOpen-e.pos),e.nodeStart&&e.pos+n.data.length>=e.node.posClose&&(e.nodeEnd=n,e.nodeEndPos=e.node.posClose-e.pos),e.pos+=n.data.length);if(e.nodeStart&&e.nodeEnd){var t=document.createRange();return t.setStart(e.nodeStart,e.nodeStartPos),t.setEnd(e.nodeEnd,e.nodeEndPos),e.node.clone.appendChild(t.extractContents()),t.insertNode(e.node.clone),t.detach(),!1}}return!0};e.keepMarkup.forEach(function(r){o(e.element,{node:r,pos:0})}),e.highlightedCode=e.element.innerHTML}}));