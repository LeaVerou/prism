<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8" />
	<link rel="icon" href="favicon.png" />
	<title>Toolbar â–² Prism plugins</title>
	<base href="../.." />
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="themes/prism.css" data-noprefix />
	<link rel="stylesheet" href="plugins/toolbar/prism-toolbar.css" data-noprefix />
	<script src="scripts/prefixfree.min.js"></script>

	<script>var _gaq = [['_setAccount', 'UA-33746269-1'], ['_trackPageview']];</script>
	<script src="https://www.google-analytics.com/ga.js" async></script>
</head>
<body class="language-markup" data-toolbar-order="select-code,hello-world,label">

<header data-plugin-header="toolbar"></header>

<section>
	<h1>How to use</h1>
	<p>The Toolbar plugin allows for several methods to register your button, using the <code>Prism.plugins.toolbar.registerButton</code> function.</p>

	<p>The simplest method is through the HTML API. Add a <code>data-label</code> attribute to the <code>pre</code> element, and the Toolbar
		plugin will read the value of that attribute and append a label to the code snippet.</p>

	<pre data-label="Hello World!"><code class="language-markup">&lt;pre data-src=&quot;plugins/toolbar/prism-toolbar.js&quot; data-label=&quot;Hello World!&quot;&gt;&lt;/pre&gt;</code></pre>

	<p>If you want to provide arbitrary HTML to the label, create a <code>template</code> element with the HTML you want in the label, and provide the
		<code>template</code> element's <code>id</code> to <code>data-label</code>. The Toolbar plugin will use the template's content for the button.
		You can also use to declare your event handlers inline:</p>

	<pre data-label="my-label-button"><code class="language-markup">&lt;pre data-src=&quot;plugins/toolbar/prism-toolbar.js&quot; data-label=&quot;my-label-button&quot;&gt;&lt;/pre&gt;</code></pre>

	<pre><code>&lt;template id=&quot;my-label-button&quot;&gt;&lt;button onclick=&quot;console.log('This is an inline-handler');&quot;&gt;My button&lt;/button&gt;&lt;/template&gt;</code></pre>

	<h2>Registering buttons</h2>

	<p>For more flexibility, the Toolbar exposes a JavaScript function that can be used to register new buttons or labels to the Toolbar,
		<code>Prism.plugins.toolbar.registerButton</code>.</p>

	<p>The function accepts a key for the button and an object with a <code>text</code> property string and an optional
		<code>onClick</code> function or a <code>url</code> string. The <code>onClick</code> function will be called when the button is clicked, while the
		<code>url</code> property will be set to the anchor tag's <code>href</code>.</p>

	<pre><code class="language-javascript">Prism.plugins.toolbar.registerButton('hello-world', {
	text: 'Hello World!', // required
	onClick: function (env) { // optional
		alert('This code snippet is written in ' + env.language + '.');
	}
});</code></pre>

	<p>See how the above code registers the <code>Hello World!</code> button? You can use this in your plugins to register your own buttons with the toolbar.</p>

	<p>If you need more control, you can provide a function to <code>registerButton</code> that returns either a <code>span</code>, <code>a</code>, or
		<code>button</code> element.</p>

	<pre><code class="language-javascript">Prism.plugins.toolbar.registerButton('select-code', function(env) {
	var button = document.createElement('button');
	button.innerHTML = 'Select Code';

	button.addEventListener('click', function () {
		// Source: http://stackoverflow.com/a/11128179/2757940
		if (document.body.createTextRange) { // ms
			var range = document.body.createTextRange();
			range.moveToElementText(env.element);
			range.select();
		} else if (window.getSelection) { // moz, opera, webkit
			var selection = window.getSelection();
			var range = document.createRange();
			range.selectNodeContents(env.element);
			selection.removeAllRanges();
			selection.addRange(range);
		}
	});

	return button;
});</code></pre>

	<p>The above function creates the Select Code button you see, and when you click it, the code gets highlighted.</p>

	<h2>Reorder buttons</h2>

	<p>By default, the buttons will be added to the code snippet in the order they were registered. If more control over
		the order is needed, an HTML attribute can be added to the <code>body</code> tag with a comma-separated string indicating the
		order.</p>

	<pre><code>&lt;body data-toolbar-order="select-code,hello-world,label"&gt;</code></pre>

	<h2>Disable buttons</h2>

	<p>By default, all buttons are enabled for all code blocks, but sometime you want to disable a specific plugin for a certain code block. This can be done via the <code>data-toolbar-disable</code> attribute which takes a comma-separated list.</p>

	<pre><code data-toolbar-disable="select-code">&lt;pre>&lt;code data-toolbar-disable="select-code">&lt;/code>&lt;/pre></code></pre>

	<p>The <code>data-toolbar-disable</code> attribute is inherited, so you could add <code>data-toolbar-disable="*"</code> to the <code>&lt;body></code> of your page and the selectively re-enable buttons with the <code>data-toolbar-enable</code> attribute (also inherited). Setting an element's attribute value of <code>data-toolbar-disable</code>/<code>data-toolbar-enable</code> to <code>"*"</code> will disable/enable all buttons for code blocks in the element.</p>

	<pre data-toolbar-disable="*"><code data-toolbar-enable="select-code">&lt;body data-toolbar-disable="*">
	&lt;!-- All buttons are disabled -->
	&lt;pre>&lt;code>&lt;/code>&lt;/pre>

	&lt;!-- Enable "select-code" for the following code block -->
	&lt;pre data-toolbar-enable="select-code">&lt;code>&lt;/code>&lt;/pre>

	&lt;!-- Enable "copy-to-clipboard" for the whole div -->
	&lt;div data-toolbar-enable="copy-to-clipboard">

		&lt;!-- Enable "select-code" and "copy-to-clipboard" for the following code block -->
		&lt;pre data-toolbar-enable="select-code">&lt;code>&lt;/code>&lt;/pre>

		&lt;!-- Enable "select-code" but not "copy-to-clipboard" for the following code block -->
		&lt;pre data-toolbar-enable="select-code" data-toolbar-disable="copy-to-clipboard">&lt;code>&lt;/code>&lt;/pre>

		&lt;!-- Enable all buttons but "select-code" for the following code block -->
		&lt;pre data-toolbar-enable="*">&lt;code data-toolbar-disable="select-code">&lt;/code>&lt;/pre>
	&lt;/div>
&lt;body></code></pre>

	<p><strong>Note: </strong> If a button is included by both the <code>data-toolbar-enable</code> attribute and <code>data-toolbar-disable</code> attribute of one element, it will be enabled.</p>
</section>

<footer data-src="templates/footer.html" data-type="text/html"></footer>
<template id="my-label-button"><button onclick="console.log('This is an inline-handler');">My button</button></template>

<script src="prism.js"></script>
<script src="plugins/toolbar/prism-toolbar.js"></script>
<script src="scripts/utopia.js"></script>
<script src="components.js"></script>
<script>
	Prism.plugins.toolbar.registerButton('hello-world', {
		text: 'Hello World!', // required
		onClick: function (env) { // optional
			alert('This code snippet is written in ' + env.language + '.');
		}
	});
</script>
<script>
	Prism.plugins.toolbar.registerButton('select-code', function(env) {
		var button = document.createElement('button');
		button.innerHTML = 'Select Code';

		button.addEventListener('click', function () {
			// Source: http://stackoverflow.com/a/11128179/2757940
			if (document.body.createTextRange) { // ms
				var range = document.body.createTextRange();
				range.moveToElementText(env.element);
				range.select();
			} else if (window.getSelection) { // moz, opera, webkit
				var selection = window.getSelection();
				var range = document.createRange();
				range.selectNodeContents(env.element);
				selection.removeAllRanges();
				selection.addRange(range);
			}
		});

		return button;
	});
</script>
<script src="scripts/code.js"></script>

</body>
</html>
