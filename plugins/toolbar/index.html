<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8" />
	<link rel="shortcut icon" href="favicon.png" />
	<title>Toolbar â–² Prism plugins</title>
	<base href="../.." />
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="themes/prism.css" data-noprefix />
	<link rel="stylesheet" href="plugins/toolbar/prism-toolbar.css" data-noprefix />
	<script src="prefixfree.min.js"></script>

	<script>var _gaq = [['_setAccount', 'UA-33746269-1'], ['_trackPageview']];</script>
	<script src="http://www.google-analytics.com/ga.js" async></script>
</head>
<body class="language-markup">

<header>
	<div class="intro" data-src="templates/header-plugins.html" data-type="text/html"></div>

	<h2>Toolbar</h2>
	<p>Attach a toolbar for plugins to easily register buttons on the top of a code block.</p>
</header>

<section>
	<h1>How to use</h1>
	<p>The Toolbar plugin allows for two methods to register your button, using the <code>Prism.plugins.toolbar.registerButton</code> function.</p>

	<p>The simplest method is to pass in an object with a <code>text</code> property string and an optional
		<code>onClick</code> function, which when provided, will be called when the button is click.</p>

	<pre><code class="language-javascript">Prism.plugins.toolbar.registerButton({
	text: 'Hello World!', // required
	onClick: function (env) { // optional
		alert('This code snippet is written in ' + env.language + '.');
	}
});</code></pre>

	<p>See how the above code registers the <code>Hello World!</code> button? You can use this in your plugins to register your own buttons with the toolbar.</p>

	<p>If you need more control, you can provide a callback to <code>registerButton</code> that returns either a <code>span</code> or <code>a</code> element.</p>

	<pre><code class="language-javascript">Prism.plugins.toolbar.registerButton(function() {
	var button = document.createElement('a');
	button.innerHTML = 'Select Code';

	button.addEventListener('click', function () {
		// Source: http://stackoverflow.com/a/11128179/2757940
		if (document.body.createTextRange) { // ms
			var range = document.body.createTextRange();
			range.moveToElementText(env.element);
			range.select();
		} else if (window.getSelection) { // moz, opera, webkit
			var selection = window.getSelection();
			var range = document.createRange();
			range.selectNodeContents(env.element);
			selection.removeAllRanges();
			selection.addRange(range);
		}
	});

	return button;
});</code></pre>

	<p>The above function creates the Select Code button you see, and when you click it, the code gets highlighted.</p>
</section>

<footer data-src="templates/footer.html" data-type="text/html"></footer>

<script src="prism.js"></script>
<script src="plugins/toolbar/prism-toolbar.js"></script>
<script src="utopia.js"></script>
<script src="components.js"></script>
<script>
	Prism.plugins.toolbar.registerButton({
		text: 'Hello World!', // required
		onClick: function (env) { // optional
			alert('This code snippet is written in ' + env.language + '.');
		}
	});
</script>
<script>
	Prism.plugins.toolbar.registerButton(function(env) {
		var button = document.createElement('a');
		button.innerHTML = 'Select Code';

		button.addEventListener('click', function () {
			// Source: http://stackoverflow.com/a/11128179/2757940
			if (document.body.createTextRange) { // ms
				var range = document.body.createTextRange();
				range.moveToElementText(env.element);
				range.select();
			} else if (window.getSelection) { // moz, opera, webkit
				var selection = window.getSelection();
				var range = document.createRange();
				range.selectNodeContents(env.element);
				selection.removeAllRanges();
				selection.addRange(range);
			}
		});

		return button;
	});
</script>
<script src="code.js"></script>

</body>
</html>